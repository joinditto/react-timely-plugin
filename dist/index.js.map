{"version":3,"file":"index.js","sources":["../src/components/TimelyModal.tsx","../src/timely.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport ReactModal from 'react-modal'\n\nimport { ReactComponent as CloseIcon } from '../assets/close-icon.svg'\n\nexport interface StylesDictionary {\n  [Key: string]: React.CSSProperties\n}\n\ninterface TimelyModalProps {\n  isOpen: boolean\n  closeBtn?: boolean\n  onClose: () => void\n}\n\nconst customModalStylesMd = {\n  overlay: {\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    overflow: 'hidden',\n    zIndex: '9999',\n    backgroundColor: 'rgba(31,31,31,0.4)'\n  },\n  content: {\n    top: '50%',\n    left: '50%',\n    // ideal translateX(-50%) translateY(-50%) changed to avoid blur issue in windows\n    transform: 'translateX(calc(-50% - 2px)) translateY(calc(-50% - 2px))',\n    width: '80%',\n    minWidth: '900px',\n    maxWidth: '1060px',\n    height: '100%',\n    maxHeight: '620px',\n    padding: 0,\n    background: 'transparent',\n    border: 'none',\n    overflow: 'hidden'\n  }\n}\n\nconst customModalStylesXs = {\n  overlay: {\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    overflow: 'hidden',\n    zIndex: '9999',\n    backgroundColor: 'rgba(31,31,31,0.4)'\n  },\n  content: {\n    top: 40,\n    left: 0,\n    bottom: 0,\n    right: 0,\n    width: '100%',\n    padding: 0,\n    background: 'transparent',\n    border: 'none',\n    overflow: 'scroll',\n    inset: '50px 0 0 0'\n  }\n}\n\nconst customModalStylesSm = {\n  overlay: {\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    overflow: 'hidden',\n    zIndex: '9999',\n    backgroundColor: 'rgba(31,31,31,0.4)'\n  },\n  content: {\n    top: 40,\n    left: 0,\n    bottom: 0,\n    right: 0,\n    width: '100%',\n    padding: 0,\n    background: 'transparent',\n    border: 'none',\n    overflow: 'scroll',\n    inset: '50px 0px',\n    maxWidth: 660,\n    margin: 'auto'\n  }\n}\n\nconst styles: StylesDictionary = {\n  closeButtonMd: {\n    position: 'fixed',\n    top: '25px',\n    right: '25px',\n    width: '19px',\n    height: '19px',\n    cursor: 'pointer',\n    color: '#fff',\n    backgroundSize: 'contain',\n    zIndex: 10000\n  },\n  closeButtonXs: {\n    position: 'fixed',\n    top: '10px',\n    right: '10px',\n    width: '15px',\n    height: '15px',\n    cursor: 'pointer',\n    color: '#fff',\n    backgroundSize: 'contain',\n    zIndex: 10000\n  },\n  overlay: {\n    width: '100vw',\n    height: '100vh',\n    position: 'absolute',\n    top: 0,\n    left: 0\n  }\n}\n\nconst TimelyModal: React.FC<TimelyModalProps> = ({\n  isOpen,\n  onClose,\n  closeBtn = true,\n  children\n}) => {\n  const isBrowser = typeof window !== 'undefined'\n\n  const [viewport, setViewport] = useState<{ width: Number; height: number }>({\n    width: 0,\n    height: 0\n  })\n\n  const handleViewportChange = () => {\n    if (isBrowser) {\n      setViewport({\n        width: document.documentElement.clientWidth,\n        height: document.documentElement.clientHeight\n      })\n    }\n  }\n\n  useEffect(() => {\n    if (isBrowser) {\n      window.addEventListener('resize', handleViewportChange)\n      setViewport({\n        width: document.documentElement.clientWidth,\n        height: document.documentElement.clientHeight\n      })\n    }\n    return () => {\n      if (isBrowser) {\n        window.removeEventListener('resize', handleViewportChange)\n      }\n    }\n  }, [])\n\n  return (\n    <ReactModal\n      isOpen={isOpen}\n      style={\n        viewport && viewport.width < 768\n          ? customModalStylesXs\n          : viewport && viewport.width < 960\n          ? customModalStylesSm\n          : customModalStylesMd\n      }\n      overlayElement={(props, contentElement) => (\n        <div style={styles.overlay} onClick={onClose}>\n          {closeBtn && (\n            <div\n              style={\n                viewport && viewport.width < 960\n                  ? styles.closeButtonXs\n                  : styles.closeButtonMd\n              }\n              onClick={(e) => {\n                e.stopPropagation()\n                onClose()\n              }}\n            >\n              <CloseIcon />\n            </div>\n          )}\n          <div {...props}>{contentElement}</div>\n        </div>\n      )}\n      ariaHideApp={false}\n      onAfterOpen={() => (document.body.style.overflow = 'hidden')}\n      onAfterClose={() => (document.body.style.overflow = 'unset')}\n    >\n      {children}\n    </ReactModal>\n  )\n}\n\nexport default TimelyModal\n","import React, { Fragment, useState } from 'react'\nimport TimelyModal from './components/TimelyModal'\nimport { ReactComponent as Loader } from './assets/loader.svg'\n\ntype Optional<T extends object> = {\n  [P in keyof T]?: T[P]\n}\n\nexport type Embed = Optional<{\n  embed_domain: string\n  embed_path: string\n  embed_type: 'popup' | 'inline'\n}>\n\nexport type Prefill = Optional<{\n  name: string\n  email: string\n  phone: string\n  product: string\n  query: string\n  date: Date\n}>\n\nexport type Utm = Optional<{\n  utm_campaign: string\n  utm_source: string\n  utm_medium: string\n  utm_content: string\n  utm_term: string\n  ref: string\n  referral_url: string\n  referral_code: string\n}>\n\nexport type IframeTitle = string\n\ninterface TimelyWidgetProps {\n  url: string\n  prefill?: Prefill\n  utm?: Utm\n  iframeTitle?: IframeTitle\n  embed?: Embed\n}\n\ninterface TimelyWidgetState {\n  isOpen: boolean\n  content: JSX.Element | null\n  confirmClose: boolean\n}\n\nclass TimelyWidget extends React.Component<any, TimelyWidgetState> {\n  static singletonRef: any\n\n  constructor(props: any) {\n    super(props)\n\n    this.state = {\n      isOpen: false,\n      content: null,\n      confirmClose: false\n    }\n\n    TimelyWidget.singletonRef = this\n  }\n\n  /**\n   *\n   * @param event\n   */\n  handleMessage = (event: any) => {\n    const { data } = event\n    if (data.from === 'timely') {\n      if (data.action === 'confirm-close') {\n        this.setState({ isOpen: false, confirmClose: false })\n      } else if (data.action === 'reset-confirmation') {\n        this.setState({ confirmClose: false })\n      }\n    }\n  }\n\n  // we have to handle close confirmations from the iframe loaded listening for such a message\n  componentDidMount(): void {\n    window.addEventListener('message', this.handleMessage, false)\n  }\n\n  // free up the event listeners on unmount\n  componentWillUnmount(): void {\n    window.removeEventListener('message', this.handleMessage)\n  }\n\n  show = (props: TimelyWidgetProps) => {\n    this.setState({\n      isOpen: true,\n      content: <TimelyIframe {...props} />\n    })\n  }\n\n  close = () => {\n    if (!this.state.confirmClose && this.state.isOpen) {\n      this.setState({ confirmClose: true })\n      if (window && window.document) {\n        const timelyIframe: HTMLIFrameElement | null =\n          window?.document?.getElementById('timely-iframe') as HTMLIFrameElement\n\n        if (timelyIframe) {\n          timelyIframe.contentWindow?.postMessage(\n            { from: 'react-timely', action: 'close' },\n            '*'\n          )\n        }\n      }\n    }\n  }\n\n  render() {\n    const { isOpen } = this.state\n\n    return (\n      <TimelyModal\n        isOpen={isOpen}\n        onClose={this.close}\n        closeBtn={!this.state.confirmClose}\n      >\n        <Fragment>{this.state.content}</Fragment>\n      </TimelyModal>\n    )\n  }\n}\n\ntype TimelyProviderProps = {\n  children?: React.ReactNode\n}\n\nconst TimelyProvider: React.FC<TimelyProviderProps> = ({ children }) => {\n  return (\n    <Fragment>\n      {children}\n      <TimelyWidget />\n    </Fragment>\n  )\n}\n\nexport { TimelyProvider }\n\nexport const TimelyIframe: React.FC<TimelyWidgetProps> = ({\n  url,\n  utm,\n  embed,\n  iframeTitle\n}) => {\n  const [loading, showLoader] = useState<boolean>(true)\n\n  const formUrl = () => {\n    const queryStringIndex = url.indexOf('?')\n    const hasQueryString = queryStringIndex > -1\n    const queryString = hasQueryString ? url.slice(queryStringIndex + 1) : null\n    const baseUrl = hasQueryString ? url.slice(0, queryStringIndex) : url\n\n    const updatedQueryString = [\n      queryString,\n      utm\n        ? Object.keys(utm)\n            .map((utmParam) => `${utmParam}=${utm[utmParam]}`)\n            .join('&')\n        : null,\n      embed\n        ? Object.keys(embed)\n            .map((embedProp) => `${embedProp}=${embed[embedProp]}`)\n            .join('&')\n        : null\n    ]\n      .filter((item) => item !== null)\n      .join('&')\n\n    return `${baseUrl}?${updatedQueryString}`\n  }\n\n  const finalUrl = formUrl()\n\n  return (\n    <div\n      style={{\n        width: '100%',\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center'\n      }}\n    >\n      {loading && (\n        <div\n          style={{\n            position: 'absolute',\n            width: '100%',\n            height: '100%',\n            display: 'flex',\n            flexDirection: 'column',\n            justifyContent: 'center',\n            alignItems: 'center',\n            zIndex: -1\n          }}\n        >\n          <Loader\n            style={{\n              width: 75,\n              height: 57\n            }}\n          />\n        </div>\n      )}\n      <iframe\n        id='timely-iframe'\n        src={finalUrl}\n        frameBorder={0}\n        width='100%'\n        height='100%'\n        title={iframeTitle ? iframeTitle : 'Ditto Timely'}\n        onLoad={() => showLoader(false)}\n        allowTransparency={true}\n        style={{ visibility: loading ? 'hidden' : 'visible' }}\n      />\n    </div>\n  )\n}\n\nexport const openPopupWidget = (options: TimelyWidgetProps) => {\n  TimelyWidget.singletonRef.show(options)\n}\n"],"names":["customModalStylesMd","overlay","top","left","right","bottom","overflow","zIndex","backgroundColor","content","transform","width","minWidth","maxWidth","height","maxHeight","padding","background","border","customModalStylesXs","inset","customModalStylesSm","margin","styles","closeButtonMd","position","cursor","color","backgroundSize","closeButtonXs","TimelyModal","isOpen","onClose","closeBtn","children","isBrowser","window","useState","viewport","setViewport","handleViewportChange","document","documentElement","clientWidth","clientHeight","useEffect","addEventListener","removeEventListener","React","ReactModal","style","overlayElement","props","contentElement","onClick","e","stopPropagation","CloseIcon","ariaHideApp","onAfterOpen","body","onAfterClose","TimelyWidget","event","data","from","action","setState","confirmClose","TimelyIframe","state","timelyIframe","getElementById","contentWindow","postMessage","singletonRef","componentDidMount","handleMessage","componentWillUnmount","render","close","Fragment","Component","TimelyProvider","url","utm","embed","iframeTitle","loading","showLoader","formUrl","queryStringIndex","indexOf","hasQueryString","queryString","slice","baseUrl","updatedQueryString","Object","keys","map","utmParam","join","embedProp","filter","item","finalUrl","display","flexDirection","justifyContent","alignItems","Loader","id","src","frameBorder","title","onLoad","allowTransparency","visibility","openPopupWidget","options","show"],"mappings":"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"}