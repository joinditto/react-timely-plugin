{"version":3,"file":"index.js","sources":["../src/components/TimelyModal.tsx","../src/timely.tsx"],"sourcesContent":["import React, { PropsWithChildren, useEffect, useState } from 'react'\nimport ReactModal from 'react-modal'\n\nimport { ReactComponent as CloseIcon } from '../assets/close-icon.svg'\n\nexport interface StylesDictionary {\n  [Key: string]: React.CSSProperties\n}\n\ninterface TimelyModalProps extends PropsWithChildren {\n  isOpen: boolean\n  closeBtn?: boolean\n  onClose: () => void\n}\n\nconst customModalStylesMd = {\n  overlay: {\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    overflow: 'hidden',\n    zIndex: '9999',\n    backgroundColor: 'rgba(31,31,31,0.4)'\n  },\n  content: {\n    top: '50%',\n    left: '50%',\n    // ideal translateX(-50%) translateY(-50%) changed to avoid blur issue in windows\n    transform: 'translateX(calc(-50% - 2px)) translateY(calc(-50% - 2px))',\n    width: '80%',\n    minWidth: '900px',\n    maxWidth: '1060px',\n    height: '100%',\n    maxHeight: '620px',\n    padding: 0,\n    background: 'transparent',\n    border: 'none',\n    overflow: 'hidden'\n  }\n}\n\nconst customModalStylesXs = {\n  overlay: {\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    overflow: 'hidden',\n    zIndex: '9999',\n    backgroundColor: 'rgba(31,31,31,0.4)'\n  },\n  content: {\n    top: 40,\n    left: 0,\n    bottom: 0,\n    right: 0,\n    width: '100%',\n    padding: 0,\n    background: 'transparent',\n    border: 'none',\n    overflow: 'scroll',\n    inset: '50px 0 0 0'\n  }\n}\n\nconst customModalStylesSm = {\n  overlay: {\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    overflow: 'hidden',\n    zIndex: '9999',\n    backgroundColor: 'rgba(31,31,31,0.4)'\n  },\n  content: {\n    top: 40,\n    left: 0,\n    bottom: 0,\n    right: 0,\n    width: '100%',\n    padding: 0,\n    background: 'transparent',\n    border: 'none',\n    overflow: 'scroll',\n    inset: '50px 0px',\n    maxWidth: 660,\n    margin: 'auto'\n  }\n}\n\nconst styles: StylesDictionary = {\n  closeButtonMd: {\n    position: 'fixed',\n    top: '25px',\n    right: '25px',\n    width: '19px',\n    height: '19px',\n    cursor: 'pointer',\n    color: '#fff',\n    backgroundSize: 'contain',\n    zIndex: 10000\n  },\n  closeButtonXs: {\n    position: 'fixed',\n    top: '10px',\n    right: '10px',\n    width: '15px',\n    height: '15px',\n    cursor: 'pointer',\n    color: '#fff',\n    backgroundSize: 'contain',\n    zIndex: 10000\n  },\n  overlay: {\n    width: '100vw',\n    height: '100vh',\n    position: 'absolute',\n    top: 0,\n    left: 0\n  }\n}\n\nconst TimelyModal: React.FC<TimelyModalProps> = ({\n  isOpen,\n  onClose,\n  closeBtn = true,\n  children\n}) => {\n  const isBrowser = typeof window !== 'undefined'\n\n  const [viewport, setViewport] = useState<{ width: number; height: number }>({\n    width: 0,\n    height: 0\n  })\n\n  const handleViewportChange = () => {\n    if (isBrowser) {\n      setViewport({\n        width: document.documentElement.clientWidth,\n        height: document.documentElement.clientHeight\n      })\n    }\n  }\n\n  useEffect(() => {\n    if (isBrowser) {\n      window.addEventListener('resize', handleViewportChange)\n      setViewport({\n        width: document.documentElement.clientWidth,\n        height: document.documentElement.clientHeight\n      })\n    }\n    return () => {\n      if (isBrowser) {\n        window.removeEventListener('resize', handleViewportChange)\n      }\n    }\n  }, [])\n\n  return (\n    <ReactModal\n      isOpen={isOpen}\n      style={\n        viewport && viewport.width < 768\n          ? customModalStylesXs\n          : viewport && viewport.width < 960\n          ? customModalStylesSm\n          : customModalStylesMd\n      }\n      overlayElement={(props, contentElement) => (\n        <div style={styles.overlay} onClick={onClose}>\n          {closeBtn && (\n            <div\n              style={\n                viewport && viewport.width < 960\n                  ? styles.closeButtonXs\n                  : styles.closeButtonMd\n              }\n              onClick={(e) => {\n                e.stopPropagation()\n                onClose()\n              }}\n            >\n              <CloseIcon />\n            </div>\n          )}\n          <div {...props}>{contentElement}</div>\n        </div>\n      )}\n      ariaHideApp={false}\n      onAfterOpen={() => (document.body.style.overflow = 'hidden')}\n      onAfterClose={() => (document.body.style.overflow = 'unset')}\n    >\n      {children}\n    </ReactModal>\n  )\n}\n\nexport default TimelyModal\n","import React, { Fragment, useState } from 'react'\nimport TimelyModal from './components/TimelyModal'\nimport { ReactComponent as Loader } from './assets/loader.svg'\n\ntype Optional<T extends object> = {\n  [P in keyof T]?: T[P]\n}\n\nexport type Embed = Optional<{\n  embed_domain: string\n  embed_path: string\n  embed_type: 'popup' | 'inline'\n}>\n\nexport type Prefill = Optional<{\n  name: string\n  email: string\n  phone: string\n  product: string\n  query: string\n  date: Date\n}>\n\nexport type Utm = Optional<{\n  utm_campaign: string\n  utm_source: string\n  utm_medium: string\n  utm_content: string\n  utm_term: string\n  ref: string\n  referral_url: string\n  referral_code: string\n}>\n\nexport type IframeTitle = string\n\ninterface TimelyWidgetProps {\n  url: string\n  prefill?: Prefill\n  utm?: Utm\n  iframeTitle?: IframeTitle\n  embed?: Embed\n}\n\ninterface TimelyWidgetState {\n  isOpen: boolean\n  content: JSX.Element | null\n  confirmClose: boolean\n}\n\nclass TimelyWidget extends React.Component<any, TimelyWidgetState> {\n  static singletonRef: any\n\n  constructor(props: any) {\n    super(props)\n\n    this.state = {\n      isOpen: false,\n      content: null,\n      confirmClose: false\n    }\n\n    TimelyWidget.singletonRef = this\n  }\n\n  /**\n   *\n   * @param event\n   */\n  handleMessage = (event: any) => {\n    const { data } = event\n    if (data.from === 'timely') {\n      if (data.action === 'confirm-close') {\n        this.setState({ isOpen: false, confirmClose: false })\n      } else if (data.action === 'reset-confirmation') {\n        this.setState({ confirmClose: false })\n      }\n    }\n  }\n\n  // we have to handle close confirmations from the iframe loaded listening for such a message\n  componentDidMount(): void {\n    window.addEventListener('message', this.handleMessage, false)\n  }\n\n  // free up the event listeners on unmount\n  componentWillUnmount(): void {\n    window.removeEventListener('message', this.handleMessage)\n  }\n\n  show = (props: TimelyWidgetProps) => {\n    this.setState({\n      isOpen: true,\n      content: <TimelyIframe {...props} />\n    })\n  }\n\n  close = () => {\n    if (!this.state.confirmClose && this.state.isOpen) {\n      this.setState({ confirmClose: true })\n      if (window && window.document) {\n        const timelyIframe: HTMLIFrameElement | null =\n          window?.document?.getElementById('timely-iframe') as HTMLIFrameElement\n\n        if (timelyIframe) {\n          timelyIframe.contentWindow?.postMessage(\n            { from: 'react-timely', action: 'close' },\n            '*'\n          )\n        }\n      }\n    }\n  }\n\n  render() {\n    const { isOpen } = this.state\n\n    return (\n      <TimelyModal\n        isOpen={isOpen}\n        onClose={this.close}\n        closeBtn={!this.state.confirmClose}\n      >\n        <Fragment>{this.state.content}</Fragment>\n      </TimelyModal>\n    )\n  }\n}\n\ntype TimelyProviderProps = {\n  children?: React.ReactNode\n}\n\nconst TimelyProvider: React.FC<TimelyProviderProps> = ({ children }) => {\n  return (\n    <Fragment>\n      {children}\n      <TimelyWidget />\n    </Fragment>\n  )\n}\n\nexport { TimelyProvider }\n\nexport const TimelyIframe: React.FC<TimelyWidgetProps> = ({\n  url,\n  utm,\n  embed,\n  iframeTitle\n}) => {\n  const [loading, showLoader] = useState<boolean>(true)\n\n  const formUrl = () => {\n    const queryStringIndex = url.indexOf('?')\n    const hasQueryString = queryStringIndex > -1\n    const queryString = hasQueryString ? url.slice(queryStringIndex + 1) : null\n    const baseUrl = hasQueryString ? url.slice(0, queryStringIndex) : url\n\n    const updatedQueryString = [\n      queryString,\n      utm\n        ? Object.keys(utm)\n            .map((utmParam) => `${utmParam}=${utm[utmParam as keyof Utm]}`)\n            .join('&')\n        : null,\n      embed\n        ? Object.keys(embed)\n            .map(\n              (embedProp) => `${embedProp}=${embed[embedProp as keyof Embed]}`\n            )\n            .join('&')\n        : null\n    ]\n      .filter((item) => item !== null)\n      .join('&')\n\n    return `${baseUrl}?${updatedQueryString}`\n  }\n\n  const finalUrl = formUrl()\n\n  return (\n    <div\n      style={{\n        width: '100%',\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center'\n      }}\n    >\n      {loading && (\n        <div\n          style={{\n            position: 'absolute',\n            width: '100%',\n            height: '100%',\n            display: 'flex',\n            flexDirection: 'column',\n            justifyContent: 'center',\n            alignItems: 'center',\n            zIndex: -1\n          }}\n        >\n          <Loader\n            style={{\n              width: 75,\n              height: 57\n            }}\n          />\n        </div>\n      )}\n      <iframe\n        id='timely-iframe'\n        src={finalUrl}\n        frameBorder={0}\n        width='100%'\n        height='100%'\n        title={iframeTitle ?? 'Ditto Timely'}\n        onLoad={() => showLoader(false)}\n        allowTransparency={true}\n        style={{ visibility: loading ? 'hidden' : 'visible' }}\n      />\n    </div>\n  )\n}\n\nexport const openPopupWidget = (options: TimelyWidgetProps) => {\n  TimelyWidget.singletonRef.show(options)\n}\n"],"names":["customModalStylesMd","overlay","top","left","right","bottom","overflow","zIndex","backgroundColor","content","transform","width","minWidth","maxWidth","height","maxHeight","padding","background","border","customModalStylesXs","inset","customModalStylesSm","margin","styles","closeButtonMd","position","cursor","color","backgroundSize","closeButtonXs","TimelyModal","_ref","isOpen","onClose","_ref$closeBtn","closeBtn","children","isBrowser","window","_useState","useState","viewport","setViewport","handleViewportChange","document","documentElement","clientWidth","clientHeight","useEffect","addEventListener","removeEventListener","React","ReactModal","style","overlayElement","props","contentElement","onClick","e","stopPropagation","CloseIcon","ariaHideApp","onAfterOpen","body","onAfterClose","TimelyWidget","_React$Component","_inheritsLoose","_this","call","event","data","from","action","setState","confirmClose","TimelyIframe","state","_window","_window$document","timelyIframe","getElementById","_timelyIframe$content","contentWindow","postMessage","singletonRef","_assertThisInitialized","_proto","prototype","componentDidMount","handleMessage","componentWillUnmount","render","close","Fragment","Component","TimelyProvider","_ref2","url","utm","embed","iframeTitle","loading","showLoader","formUrl","queryStringIndex","indexOf","hasQueryString","queryString","slice","baseUrl","updatedQueryString","Object","keys","map","utmParam","join","embedProp","filter","item","finalUrl","display","flexDirection","justifyContent","alignItems","Loader","id","src","frameBorder","title","onLoad","allowTransparency","visibility","openPopupWidget","options","show"],"mappings":"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"}